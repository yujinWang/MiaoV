<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    #div1 {
      width: 100px;
      height: 50px;
      border: 2px solid red;
      float: left;
    }
    tr:nth-child(2n) {
      background-color: #f3f3f3;
    }
    tr:nth-child(2n+1) {
      background-color: pink;
    }
    tr:nth-child(2n+1):hover {
      background-color: blue;
    }
  </style>
</head>
<body>
  <div id="div1">
  </div>
  <table>
    <thead>表头</thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
      </tr>
    </tbody>
  </table>
</body>
<script>
  // 1-获取数组中的最大值-Math.max接受Number类型的参数，xxx.call(this,arg1,arg2,arg3)=xxx.apply(this,arguments)
  var arr = [1,30,2,6]
  // console.log(Math.max(arr[0],arr[1],arr[2],arr[3])) // 30
  // console.log(Math.max.call(Math,arr[0],arr[1],arr[2],arr[3])) // 30
  // console.log(Math.max.apply(Math,arr)) // 30

  // 2-写一个函数获取页面中宽高大于50px的节点-document.all页面所有节点
  function traverse() {
    var arr = [];
    var elements = [];
    if (document.all) { // document.all返回页面中所有节点的htmlcollection集合
      elements = document.all;
    } else {
      elements = document.getElementsByTagName("*");
    }
    //console.log(elements.length);
    for (var i = 0; i < elements.length; i++) {
      var ele = elements[i];
      //console.log(ele.tagName);
      //width 返回的是字符串 offsetWidth 返回的是带边框的 Number 型的数字
      var width = parseFloat(ele.style.width) || ele.offsetWidth;
      //console.log(width);
      var height = parseFloat(ele.style.height) || ele.offsetHeight;
      //console.log(height);
      if (width > 50 && height > 50) {
        arr.push(elements[i].tagName);
      }
    }
    return arr;
  }
  // console.log(traverse());

  // 3-sum函数求和
  // Should equal 15
  // sum(1, 2, 3, 4, 5);
  // Should equal 0
  // sum(5, null, -5);
  // Should equal 10
  // sum('1.0', false, 1, true, 1, 'A', 1, 'B', 1, 'C', 1, 'D', 1, 'E', 1, 'F', 1, 'G', 1);
  // Should equal 0.3, not 0.30000000000000004
  // sum(0.1, 0.2);
  function sum() {
    // arguments对象不是一个Array，只有length和索引，转换方法如下
    // var args = Array.prototype.slice.call(arguments);
    // var args = [].slice.call(arguments);
    // ES2015
    // const args = Array.from(arguments);
    // const args = [...arguments];
    console.log(arguments)
    let toArray = [...arguments]
    let firstStep = toArray.filter(item => item !== true && item !== false && item !== null) // 过滤布尔值和null
    console.log(firstStep)
    let tempArr = firstStep.map(item => {
      return (Number(item) !== NaN)
    })
    console.log(tempArr)
  }
  // sum(1,2,3,33,'23','abc',true,false,'20',null)
  // 下面简洁版本-对于无法转换的null/NaN等，取后面或值0
  function sum1() {
    var nResult = 0;
    for (var i = 0, l = arguments.length; i < l; i++) {
      nResult += window.parseFloat(arguments[i]) || 0;
    }
    return nResult.toFixed(3) * 1000 / 1000;
  }
  // console.log(sum1(1,2,3,33,'23','abc',true,false,'20',null))

  // 输出对象中值大于2的key的数组
  var data1 = {a: 1, b: 2, c: 3, d: 4};
  let result = Object.keys(data1).filter(x => data1[x] > 2);
  // console.log(result);

  // 4-如何获取UA(user agent)浏览器代理信息
  function whatBrowser() {
    document.Browser.Name.value=navigator.appName;
    document.Browser.Version.value=navigator.appVersion;
    document.Browser.Code.value=navigator.appCodeName;
    document.Browser.Agent.value=navigator.userAgent;
  }

  // 5-js对象深拷贝-需要区分数组和对象-while语句，当条件为true的时候会循环执行
  // var aaa = [];
  // console.log(aaa instanceof Array)
  // function clone(obj) {
  //   var result;
  //   if(obj instanceof Array) {
  //     result = []; // 创建一个新的空数组
  //     let len = obj.length;
  //     while(len--) {
  //       result.push(result[len] = obj[len])
  //     }
  //     return result;
  //   }else if(obj instanceof Object) {
  //     result = {}; // 创建一个新的空对象
  //     for(var k in obj) {
  //       result[k] = obj[k]
  //     }
  //     return result;
  //   }else {
  //     return obj;
  //   }
  // }
  // var arr = [1,3,6,3,26,66]; // [1, 3, 6, 3, 26, 66, 66, 26, 3, 6, 3, 1] 有点问题！！！
  // var obj = { "name": "zhangsan", "age": 20 }; // { "name": "zhangsan", "age": 20 }
  // console.log(clone(arr));

  // 6-eval是魔鬼-作用是把字符串形式的js代码解析成js并执行
  // 避免使用eval非常耗性能，一次解析成js语句，一次执行
  // eval("alert('我是由eval解析来的alert')")
  
  // 7-哪些操作会造成内存泄漏？
  // 内存泄漏指任何对象在您不再拥有或需要它之后仍然存在。
  // 垃圾回收器定期扫描对象，并计算引用了每个对象的其他对象的数量。如果一个对象的
  // 引用数量为 0（没有其他对象引用过该对象），或对该对象的惟一引用是循环的，那么该对
  // 象的内存即可回收。
  // 1. setTimeout 的第一个参数使用字符串而非函数的话，会引发内存泄漏。
  // 2. 闭包
  // 3. 控制台日志
  // 4. 循环（在两个对象彼此引用且彼此保留时，就会产生一个循环）

  // 8-闭包一题
  function Foo(){
    var i=0;
    return function(){
      document.write(i++);
    }
  }
  var f1=Foo(),
  f2=Foo();
  // f1(); // 0
  // f1(); // 1
  // f2(); // 0
  // f2(); // 1
  // f2(); // 2

  // 9-indexOf功能，如果存在返回匹配的位置，否则返回-1
  function myIndexOf(str,subStr) {
    var result = str.match(subStr);
    return result ? result.index : -1
  }
  var str1 = "hello";
  var subStr1 = "o";
  // console.log(myIndexOf(str1,subStr1));
  // 或者
  function myIndexOf1(a,b) {
    return a.search(b)
  }
  // console.log(myIndexOf1(str1,subStr1))

  // 10-以下代码的输出结果
  // console.log(1+ "2"+"2"); // "122" 进行字符串的拼接
  // console.log(1+ +"2"+"2"); // "32"-- +"2"加号为一元操作运算符，将字符串转换为数字 1+2=3再和"2"拼接
  // console.log("A"- "B"+"2"); // "NaN2"
  // console.log("A"- "B"+2); // NaN

  // 11-js预编译执行-js预编译会将下面代码中的add变为下面同名第二个add，需注意这点
  var x = 1, y = z = 0;
  function add(n) {
    return n = n + 1;
  }
  y = add(x);
  function add(n) {
    return n = n + 3;
  }
  z = add(x);
  // console.log(x,y,z) // 1，4，4

  // 12-用js实现sort排序函数-用快速排序实现-找一个基准点(一般取中间位置)
  // 循环数组，对小于基准值的放数组A，对大于基准值的放数组B，递归调用并拼接返回
  // 递归每次将左右两侧问题缩小一半？？？可能描述欠准确
  function quickSort(arr) {
    if(arr.length <=1) {
      return arr
    }
    var less = [];
    var greater = [];
    var pointX = Math.floor(arr.length/2) // 基准点索引
    var poinxVal = arr.splice(pointX,1)[0] // 基准点值
    // 遍历数组
    for(var i=0;i<arr.length;i++) {
      if(arr[i] < poinxVal) {
        less.push(arr[i])
      }else {
        greater.push(arr[i])
      }
    }
    // 递归调用排序好的数据并将两部分拼接-根据拼接顺序可实现升序或者降序
    return quickSort(less).concat([poinxVal],quickSort(greater))
    // return quickSort(greater).concat([poinxVal],quickSort(less))
  }
  var arr2 = [2,43,1,5]
  // console.log(quickSort(arr2))

  // 13-请给Array本地对象增加一个原型方法，它用于删除数组条目中重复的条目(可能有多个)，
  // 返回值是一个包含被删除的重复条目的新数组
  Array.prototype.quchong = function() {
    var result = [];
    for(var i=0;i<this.length;i++) {
      for(var j=i+1;j<this.length;j++) {
        if(this[i] == this[j]) {
          result.push(this.splice(j,1)[0]) // splice返回被删除元素，是一个数组，用[0]取值
        }
      }
    }
    return result
  }
  // console.log([1,22,22,3,6,6].quchong())

  // 14-请编写一个 JavaScript 函数 parseQueryString，它的用途是把 URL参数解析为一个对象
  // var url = “http://www.taobao.com/index.php?key0=0&key1=1&key2=2.....”
  // var obj = parseQueryString(url);
  // alert(obj.key0) // 输出 0
  function parseQueryString(url) {
    var keys = url.split("?")[1];
    var temp = keys.split("&");
    var result = {};
    for(var i=0;i<temp.length;i++) {
      var temp2 = temp[i].split("=");
      result[temp2[0]]=temp2[1]
    }
    return result
  }
  var url = "http://www.taobao.com/index.php?key0=0&key1=1&key2=2"
  // console.log(parseQueryString(url))

  // 15-请编写一个 JavaScript 函数 toRGB，它的作用是转换 CSS 中常用的颜色编码
  // 核心的一点是将rbg中的颜色进行16进制的转换
  // alert(toRGB("#0000FF")); // 输出 rgb(0, 0, 255)
  // alert(toRGB("invalid")); // 输出 invalid
  // alert(toRGB("#G00")); // 输出 #G00
  function toRGB(color) {
    var reg = /^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;
    var match = color.match(reg);
    return match ? 'rgb('+parseInt(match[1],16)+','+parseInt(match[2],16)+','+parseInt(match[3],16)+')' : color
  }
  // console.log(toRGB("#0000FF"))
  // console.log(toRGB("invalid"))
  // console.log(toRGB("#G00"))

  // 16-将数字转化为千分位的格式如100000==>100,000 \b匹配单词的开始或结束
  function formateData(param) {
    var re=/(?=(?!\b)(\d{3})+$)/g; // 对这段并不是很明白
    return param.replace(re,",");
  }
  var param = "15000000"
  // console.log(formateData(param))

</script>
</html>